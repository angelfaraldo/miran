#!/usr/bin/env python
# -*- coding: UTF-8 -*-

"""
This bin looks for Beatport tracks (typically two-minute long, 96Kbps mp3 files)
matching a given track id number. If the track id number exists in beatport,
it will be downloaded and renamed with metadata information.

The numeric range where Beatport tracks seem to be allocated is between 5000 and 6580000.

Ángel Faraldo, July 2017.
Ángel Faraldo, July 2017.
"""

datasets = {

    "gskey": [1004923, 1007941, 10089, 1009960, 101069, 1017921, 1026478, 1033148, 1034795, 1037507, 1041574, 1043194,
              1052744, 1056896, 1074548, 1075123, 1092676, 1103512, 1105632, 1140027, 1149778, 1161234, 1161249,
              1164898, 1178656, 1193612, 1194720, 1198688, 1206025, 1209745, 1224698, 1234668, 1234669, 1234670,
              1234748, 1234749, 1234750, 1234751, 1234752, 1257593, 1298595, 1316308, 1353830, 1356281, 1389887,
              1406309, 1415239, 1442809, 1468437, 1474122, 1486770, 1494159, 1549964, 1568217, 1574723, 1575015,
              1611446, 1614715, 1626779, 1650933, 1650934, 1652412, 1669939, 1673811, 1678455, 1681074, 1681077,
              1681085, 1682815, 1690921, 1695408, 1706844, 1725800, 1757071, 1763782, 1771576, 1771577, 1776378,
              1781139, 1785226, 1787061, 1792026, 1792100, 1792506, 1795653, 1796518, 1803909, 1808022, 1809174,
              1814469, 1822087, 1822502, 1837440, 1850984, 1856889, 1864037, 1880732, 1904501, 190477, 191347,
              1922470, 1927655, 1939732, 1944125, 1948785, 1949099, 1950170, 1960032, 1964905, 1970992, 1978917,
              1981501, 1982269, 1983975, 1984204, 1986370, 1990297, 1991458, 2006103, 2007977, 2014445, 2018991,
              2024026, 2025670, 2026524, 2029598, 2031094, 2031096, 203493, 2046342, 2047796, 2048054, 2048940,
              2049680, 2051166, 2052966, 2053495, 2054968, 205597, 2059625, 2069519, 2070773, 2075331, 208158,
              2081732, 209206, 2434664, 2435861, 2436276, 2436729, 2438899, 2440193, 2447748, 2448121, 2666332,
              2666528, 2667501, 2673157, 2673251, 2673252, 2673254, 2676506, 2680040, 2725284, 2725286, 2725289,
              2725290, 272788, 2741219, 2760321, 2996293, 3003894, 3005030, 3014118, 3015217, 3024384, 3033991,
              305771, 3069201, 3070298, 3076768, 3093661, 3095708, 3114501, 3116329, 3129757, 3133794, 3137686,
              3150078, 3151513, 3165770, 3172588, 3178147, 3178155, 3186615, 3211603, 3211733, 3228297, 3228649,
              3228698, 3229038, 3232851, 3233653, 3246151, 3249708, 3250632, 3257231, 3260121, 3262951, 3270413,
              3271514, 3272873, 3274260, 3275147, 3288636, 3298344, 3302298, 3302451, 3313070, 3313145,
              3317232, 3317417, 3319290, 3319589, 3324024, 3334441, 3334471, 3338963, 3339291, 3344291, 3345479,
              3349486, 3349967, 3354212, 3356535, 3361547, 3361909, 3363196, 3363602, 3364661, 3367551, 3367553,
              3367555, 3368117, 3372108, 3377323, 3379400, 3383171, 3387619, 3389317, 3390952, 3395666, 3397932,
              3400782, 3402886, 3402887, 3402888, 3409548, 3415063, 3415421, 341832, 3424038, 3426022, 3426285,
              3428673, 3432247, 3434746, 3443052, 3450181, 3467773, 3478184, 3479363, 3480108, 3482733, 3516363,
              3517044, 3518768, 3518921, 3519499, 3523229, 3524408, 3526370, 3533310, 3533740, 3533956, 3535112,
              3542099, 3545728, 3561744, 3568438, 3568459, 3568465, 3571314, 3572701, 3572702, 3574815, 3589347,
              3590070, 3596904, 3602280, 3602282, 3625299, 3625787, 3625788, 3628628, 3629467, 3629920, 3633852,
              3638836, 3641166, 3642384, 3642409, 3648814, 3661550, 3667215, 3667683, 3668409, 3681890, 3686302,
              3687442, 3695262, 3696226, 3701975, 3703893, 3706570, 3713557, 3725440, 3740062, 3753635, 3757006,
              3759800, 376240, 3767408, 3772753, 3773561, 3776015, 3789116, 3789117, 3792959, 3794008, 3813682,
              3822226, 3826491, 3829561, 3833050, 3836490, 3841927, 3858289, 3858324, 3858331, 3873733, 3892740,
              3914630, 3930672, 3935095, 3938837, 3939148, 3949799, 3954078, 3954191, 3958396, 3958397, 3958398,
              3958755, 3958861, 3963180, 3967462, 3969868, 3971416, 3979989, 3980001, 398124, 3986537, 3992511,
              3995054, 3997722, 4002242, 400259, 4014747, 4014749, 4018247, 4021075, 4045225, 4048367, 4049579,
              4060751, 4062807, 4066359, 4066435, 4086909, 4088665, 4091478, 4093657, 4093908, 4098993, 4104235,
              4107957, 4125044, 4153238, 4162405, 4166222, 4167325, 4173942, 4186982, 4188100, 4191993, 4200490,
              4202763, 4206954, 4207145, 423054, 4231980, 4234612, 4254573, 4262569, 4275052, 4277742, 4284574,
              4293025, 4297635, 4302974, 4315749, 4325645, 4325646, 4327665, 4328155, 4328388, 435443,
              4359736, 4360488, 4361260, 4364668, 4366506, 4371042, 4399289, 4424988, 4433083, 4440292, 4450726,
              4452003, 4452122, 4453556, 4476610, 4483817, 4485436, 4498388, 4505122, 4508323, 4540971, 4566667,
              4573655, 4596347, 4609349, 4615188, 4657878, 4661735, 4666231, 4666417, 4688833, 4693198, 4702235,
              4723905, 472626, 4735775, 4755348, 4758620, 4779657, 4786362, 4802314, 4815758, 4817706, 4823611,
              4824580, 4827420, 4834156, 4840289, 4842349, 4846004, 4846007, 4857650, 4863806, 4868146, 4873286,
              4877006, 4898445, 4898455, 4900482, 4917941, 4920936, 4926785, 4927548, 4927724, 4927725, 4928111,
              4934196, 4934251, 4935536, 4939812, 4941208, 4945105, 4950604, 4950614, 4953926, 4955428, 4955940,
              4956417, 4957129, 495905, 4960012, 4965571, 4969568, 4970082, 4981539, 4981541, 4983645, 4983728,
              4992190, 4995394, 4995597, 4996031, 4996389, 4997194, 4997222, 5005412, 5009084, 5013063, 5013910,
              5026646, 5030517, 5035524, 5036476, 5039015, 5039016, 5048249, 5048263, 5049808, 5070608,
              5073839, 5078640, 5079918, 5081990, 5103693, 511348, 5120298, 5159593, 5171396, 5263098,
              5264038, 5276059, 5302340, 5304804, 5308082, 5362946, 5417860, 5431709, 5450838, 571009,
              582991, 611797, 61415, 631240, 631883, 634032, 667508, 671546, 677299, 678406, 682724, 74982, 774871,
              774874, 774875, 781373, 781995, 796860, 814290, 814505, 822664, 835903, 839886, 846900, 847422, 853834,
              873455, 877345, 883724, 890568, 891993, 896478, 903963, 907837, 923397, 945256, 973819, 975137, 975138,
              981591, 992081, 997308, 140603],

    "bmtg": [5061, 5881, 7217, 10359, 10981, 11077, 11194, 14344, 14720, 16484, 17025, 18975, 19613, 19805, 19936,
             23309, 25185, 25702, 25703, 26737, 29912, 30278, 32715, 33583, 33846, 33961, 35645, 37745, 37779, 40030,
             40643, 40875, 41267, 41907, 42234, 45212, 49242, 49721, 50823, 51220, 51936, 54925, 55659, 58167, 58226,
             58581, 60661, 61578, 61846, 62141, 63014, 63618, 65102, 65778, 66070, 68370, 69040, 74680, 76914, 77806,
             80643, 84098, 84522, 90839, 95799, 99805, 99806, 100066, 103857, 108844, 110504, 119077, 119467, 125918,
             131427, 132143, 134948, 135302, 138819, 139755, 144851, 150864, 155879, 159301, 167955, 168304, 168450,
             174074, 175197, 178137, 178770, 180779, 180831, 181659, 188000, 188616, 189045, 189424, 190162, 190288,
             193072, 196477, 197434, 200573, 200766, 203541, 206180, 206648, 209357, 209475, 217855, 218890, 218955,
             219078, 221206, 224078, 224256, 225388, 226990, 239698, 239972, 245736, 246613, 251655, 255261, 255895,
             257025, 269382, 273439, 273553, 277229, 277874, 282105, 283467, 287952, 289631, 290580, 291094, 292281,
             292564, 292730, 293203, 297002, 297010, 297011, 297012, 297013, 297025, 297030, 297057, 297059, 297065,
             297067, 297071, 297113, 297114, 297115, 297116, 297125, 297129, 297131, 297150, 297161, 297162, 297188,
             297191, 297193, 297204, 297206, 297218, 297252, 297253, 297261, 297264, 297266, 297268, 297269, 297271,
             297272, 297273, 297278, 297280, 297281, 297286, 297287, 297319, 297320, 297330, 297332, 297334, 297335,
             297336, 297346, 297347, 297349, 297355, 297356, 297360, 297378, 297379, 297409, 297410, 297411, 297413,
             297415, 297417, 297418, 297422, 297424, 297473, 297474, 297485, 297488, 297491, 297494, 297501, 297506,
             297513, 297517, 297521, 297534, 297535, 297536, 297538, 297541, 297542, 297575, 297579, 297580, 297598,
             297600, 297604, 297608, 297615, 297616, 297617, 297620, 297627, 297637, 297641, 297652, 297654, 297656,
             297657, 297658, 297659, 297660, 297666, 297667, 297675, 297677, 297680, 297681, 297686, 297692, 297695,
             297696, 297697, 297698, 297699, 297704, 297705, 297709, 297717, 297718, 297721, 297724, 297735, 297748,
             297751, 297756, 297757, 297766, 297767, 297768, 297769, 297804, 297806, 297807, 297811, 297816, 297818,
             297849, 297853, 297879, 297882, 297886, 297889, 297890, 297895, 297967, 297969, 297993, 297994, 297995,
             297996, 298006, 298007, 298011, 298012, 298015, 298017, 298020, 298024, 298029, 298042, 298054, 298055,
             298058, 298061, 298076, 298078, 298080, 298082, 298084, 298088, 298104, 298109, 298110, 298111, 298115,
             298129, 298134, 298169, 298170, 298172, 298173, 298193, 298211, 298215, 298216, 298226, 298236, 298319,
             298320, 298327, 298332, 298334, 298397, 298398, 298399, 298429, 298430, 298431, 298474, 298525, 298530,
             298532, 298535, 298536, 298763, 298764, 298791, 298795, 298805, 298813, 298817, 298824, 298846, 298847,
             298850, 298857, 298860, 298863, 298865, 298866, 298867, 298880, 298914, 298915, 298938, 298940, 298944,
             298951, 298984, 298985, 298986, 298987, 298989, 298990, 298992, 298998, 299003, 299008, 299025, 299031,
             299032, 299040, 299041, 299050, 299059, 299063, 299064, 299071, 299073, 299074, 299075, 299114, 299157,
             299159, 299160, 299191, 299298, 299300, 299306, 299310, 299311, 299355, 299365, 299396, 299401, 299450,
             299451, 299452, 299453, 299454, 299455, 299456, 299457, 299459, 299462, 299464, 299465, 299466, 299467,
             299468, 299469, 299470, 299471, 299472, 299473, 299474, 299475, 299482, 299483, 299486, 299488, 299489,
             299490, 299491, 299492, 299493, 299494, 299497, 299503, 299507, 299509, 299511, 299513, 299546, 299547,
             299616, 299624, 299625, 299654, 299657, 299665, 299667, 299668, 299669, 299679, 299681, 299687, 299690,
             299701, 299725, 299729, 299739, 299743, 299754, 299761, 299764, 299767, 299769, 299772, 299773, 299782,
             299786, 299789, 299792, 299800, 299801, 299807, 299808, 299809, 299810, 299811, 299812, 299817, 299820,
             299832, 299834, 299835, 299836, 299847, 299849, 299861, 299862, 299868, 299869, 299870, 299879, 299887,
             299890, 299904, 299905, 299932, 299933, 299943, 299945, 299968, 299970, 299976, 299977, 299978, 299994,
             299995, 307186, 307425, 312995, 315480, 316031, 323868, 326117, 328299, 330141, 331595, 332026, 333831,
             335862, 349463, 350773, 356905, 358893, 367369, 371036, 373434, 384265, 384364, 385707, 386088, 388664,
             392321, 396112, 400929, 401815, 402978, 408635, 410637, 431138, 431805, 432966, 435271, 441969, 443912,
             446875, 450431, 451169, 457131, 460731, 461880, 466208, 470136, 471711, 482720, 486117, 486395, 487971,
             489351, 489613, 491529, 495613, 497517, 501476, 501562, 503690, 508703, 512956, 515806, 521598, 522851,
             528454, 533963, 536497, 542315, 542876, 558054, 561086, 563669, 574098, 574896, 575766, 578325, 580557,
             585098, 588558, 588879, 598701, 601207, 603802, 605407, 608572, 608703, 611801, 611928, 611933, 616128,
             616415, 617609, 628368, 628617, 633283, 635716, 638337, 638879, 643172, 645331, 645959, 650084, 650341,
             650371, 650505, 650820, 654335, 656533, 657010, 673637, 675299, 680345, 681908, 682387, 685481, 686686,
             687183, 687544, 691545, 691843, 693512, 694157, 694280, 695589, 696806, 697443, 700076, 707425, 707851,
             710106, 712848, 712853, 715745, 718543, 722892, 723438, 734930, 737878, 738230, 742215, 753241, 754389,
             755905, 760778, 760891, 765583, 771181, 780216, 780236, 787388, 793946, 794309, 797707, 798594, 805746,
             808116, 808982, 809450, 818686, 821091, 823951, 828061, 830719, 836000, 837795, 841676, 842552, 852917,
             857189, 861422, 864300, 868240, 870280, 871246, 889391, 894614, 897094, 898664, 905046, 906851, 908868,
             909102, 912213, 920509, 920580, 920615, 923491, 923844, 940966, 943181, 944826, 950746, 953140, 958447,
             967034, 984534, 984867, 987207, 997069, 1017875, 1019315, 1019403, 1034722, 1038248, 1051007, 1054705,
             1056047, 1059355, 1060028, 1067950, 1072514, 1077935, 1093726, 1096228, 1115626, 1127447, 1144674,
             1147737, 1152124, 1152770, 1156133, 1163534, 1164250, 1164433, 1167965, 1177887, 1179938, 1185017,
             1187324, 1190182, 1190980, 1194397, 1194512, 1196189, 1205438, 1237554, 1240548, 1243107, 1258142,
             1261783, 1262462, 1267809, 1269910, 1270235, 1274431, 1276072, 1277819, 1287738, 1288533, 1290620,
             1290631, 1290726, 1298557, 1298600, 1312884, 1320423, 1320553, 1321948, 1334754, 1336593, 1338256,
             1340461, 1342043, 1350891, 1352419, 1362355, 1367862, 1367983, 1372384, 1388341, 1389267, 1389968,
             1393305, 1397802, 1398692, 1402876, 1410568, 1410588, 1413180, 1416128, 1426839, 1428584, 1429124,
             1435514, 1439221, 1439992, 1441223, 1446413, 1446566, 1453434, 1454669, 1456345, 1460099, 1461499,
             1472760, 1474885, 1478848, 1492875, 1493674, 1497713, 1507482, 1541713, 1544667, 1545117, 1556952,
             1558123, 1569491, 1579295, 1581325, 1586496, 1587110, 1587211, 1595063, 1598083, 1599632, 1607693,
             1609519, 1612997, 1613669, 1622037, 1622038, 1627499, 1642729, 1647165, 1648142, 1660225, 1662838,
             1669212, 1673356, 1681314, 1691194, 1693189, 1694550, 1716212, 1740306, 1740984, 1743700, 1746583,
             1746628, 1758017, 1758691, 1759353, 1762014, 1777396, 1781925, 1783835, 1789849, 1795965, 1797450,
             1807862, 1810291, 1848401, 1854407, 1857841, 1860990, 1868905, 1879911, 1881646, 1883395, 1893472,
             1895483, 1896153, 1905079, 1918063, 1918338, 1926319, 1926377, 1934576, 1958231, 1958760, 1971434,
             1974069, 1980637, 1981132, 1985174, 1989603, 2003951, 2016942, 2017315, 2019112, 2022073, 2022519,
             2024668, 2028917, 2046030, 2047805, 2049030, 2061659, 2062542, 2068812, 2076953, 2090586, 2104436,
             2422478, 2423336, 2425817, 2426699, 2435069, 2446138, 2664585, 2678362, 2702217, 2706210, 2706938,
             2707024, 2721806, 2741616, 2754261, 2763714, 2997186, 3010576, 3011454, 3014691, 3014758, 3018901,
             3020003, 3023456, 3027735, 3028271, 3028806, 3034770, 3044568, 3052009, 3062618, 3074103, 3078576,
             3086101, 3093686, 3095574, 3098555, 3115087, 3116337, 3122906, 3124420, 3124687, 3126447, 3137109,
             3139360, 3141667, 3150149, 3154894, 3161699, 3162448, 3166014, 3185928, 3198358, 3198699, 3205441,
             3207588, 3213612, 3218510, 3221970, 3230155, 3235703, 3240761, 3250046, 3250971, 3251296, 3252056,
             3257500, 3260611, 3272193, 3286229, 3286310, 3292669, 3296534, 3298819, 3299235, 3303218, 3311376,
             3318291, 3322505, 3327760, 3341440, 3342211, 3356780, 3359168, 3360682, 3360996, 3363187, 3377570,
             3378284, 3390945, 3391744, 3400910, 3408131, 3432838, 3440288, 3445831, 3467040, 3476908, 3486594,
             3489634, 3509627, 3516171, 3520807, 3526880, 3527620, 3528734, 3537560, 3540106, 3547619, 3558946,
             3569019, 3574764, 3581368, 3586934, 3595030, 3607700, 3619815, 3622084, 3630680, 3638458, 3639596,
             3647184, 3655850, 3656502, 3662506, 3671250, 3676879, 3687603, 3694824, 3704248, 3705941, 3715704,
             3727019, 3728272, 3731508, 3733853, 3737315, 3743797, 3762907, 3766235, 3771813, 3783446, 3791889,
             3794333, 3798377, 3801208, 3801681, 3817388, 3830951, 3831323, 3831852, 3831965, 3833751, 3836467,
             3839060, 3854133, 3857465, 3865255, 3868708, 3870922, 3889717, 3897406, 3905287, 3906152, 3912606,
             3915618, 3916942, 3923369, 3928779, 3935158, 3937649, 3948315, 3949006, 3966027, 3968158, 3987315,
             3988819, 3994605, 3999467, 4004366, 4020452, 4026906, 4032964, 4051513, 4052411, 4061369, 4071302,
             4081121, 4085830, 4089252, 4090254, 4096403, 4104550, 4106262, 4111004, 4115098, 4123856, 4132072,
             4134179, 4149415, 4151001, 4151005, 4164104, 4164425, 4180893, 4184078, 4184925, 4186569, 4188354,
             4188360, 4196452, 4202945, 4210528, 4214391, 4217672, 4220180, 4222236, 4240512, 4251163, 4262086,
             4264841, 4265141, 4266877, 4272275, 4272853, 4286040, 4292533, 4297505, 4299047, 4306620, 4310604,
             4311630, 4315887, 4318934, 4323121, 4328336, 4334231, 4340615, 4340765, 4341902, 4351142, 4353404,
             4354199, 4364291, 4372159, 4376323, 4377128, 4381031, 4398291, 4408526, 4411864, 4416284, 4418313,
             4421420, 4445523, 4451522, 4459148, 4464873, 4482723, 4496670, 4503715, 4509681, 4510650, 4514491,
             4523424, 4528744, 4562821, 4568358, 4571164, 4572120, 4586995, 4587092, 4587945, 4590651, 4590691,
             4596386, 4615998, 4616741, 4623197, 4630401, 4631771, 4660390, 4660409, 4661608, 4664095, 4665597,
             4690755, 4692133, 4704294, 4710435, 4726263, 4733800, 4741346, 4750550, 4753283, 4756702, 4759312,
             4763543, 4765342, 4767556, 4770235, 4771754, 4772886, 4784473, 4792796, 4793409, 4805277, 4809086,
             4811158, 4820720, 4824309, 4829270, 4834661, 4838183, 4848629, 4855328, 4857871, 4870279, 4873800,
             4878879, 4885376, 4887623, 4887778, 4906181, 4906900, 4907717, 4912830, 4917696, 4918269, 4920129,
             4937843, 4938098, 4943671, 4944953, 4946269, 4970565, 4974176, 4975002, 4992440, 4998705, 5011176,
             5031142, 5038642, 5048299, 5054157, 5056508, 5057312, 5059176, 5060362, 5066211, 5076754, 5092947,
             5095717, 5106232, 5120148, 5123514, 5124113, 5124850, 5133242, 5135485, 5138597, 5144599, 5148970,
             5152629, 5157102, 5159908, 5175064, 5186642, 5187049, 5188713, 5192554, 5202489, 5207006, 5207351,
             5211090, 5215470, 5234073, 5234318, 5243836, 5245862, 5254640, 5263861, 5272649, 5279212, 5287841,
             5296203, 5299867, 5299981, 5309154, 5315287, 5315479, 5317673, 5323380, 5324261, 5329278, 5330075,
             5338500, 5344837, 5351971, 5359592, 5371595, 5374180, 5380961, 5381987, 5382659, 5392168, 5393783,
             5403134, 5404020, 5404068, 5404644, 5411517, 5415462, 5419394, 5420676, 5427061, 5428785, 5429242,
             5441797, 5443161, 5456553, 5458695, 5466977, 5467340, 5476058, 5478004, 5492171, 5492384, 5493430,
             5495991, 5497183, 5497219, 5498352, 5536316, 5545112, 5547982, 5554987, 5558264, 5561072, 5568606,
             5575647, 5580807, 5594806, 5611816, 5612854, 5618695, 5622199, 5630800, 5635782, 5653983, 5654170,
             5667823, 5669262, 5672671, 5687266, 5693285, 5697805, 5701122, 5723120, 5728532, 5733037, 5734184,
             5736132, 5739130, 5742777, 5769455, 5795173, 5799274, 5813087, 5816285, 5821511, 5831818, 5841117,
             5855468, 5866030, 5874377, 5876668, 5886473, 5888808, 5903646, 5905170, 5922285, 5922688, 5925664,
             5943904, 5948622, 5955816, 5956160, 5971086, 5980898, 5980991, 5986917, 5996975, 5998113, 6002570,
             6003575, 6011574, 6027087, 6039665, 6042784, 6051774, 6062914, 6065388, 6067929, 6086331, 6087559,
             6103149, 6105589, 6107169, 6115356, 6131590, 6141900, 6144221, 6147973, 6150686, 6160319, 6161061,
             6165907, 6168356, 6180590, 6199830, 6204461, 6217931, 6218674, 6220367, 6220395, 6221323, 6222804,
             6227783, 6230588, 6235742, 6236612, 6243629, 6247002, 6258107, 6273674, 6275472, 6275984, 6276803,
             6280855, 6282277, 6282761, 6283681, 6289424, 6290068, 6294281, 6308736, 6313807, 6316062, 6317186,
             6320574, 6325840, 6327674, 6332784, 6346876, 6359688, 6379893, 6380702, 6390202, 6394765, 6420899,
             6431045, 6435742, 6439567, 6448769, 6461913, 6462754, 6469727, 6476511, 6487073, 6529435, 6532021,
             6535130, 6537998, 6563157, 6574410]
    
}


if __name__ == "__main__":

    import os.path
    from miran.beatport import download_track
    from miran.utils import create_dir
    from argparse import ArgumentParser

    parser = ArgumentParser(description="Download Beatport preview excerpts by matching id's.")
    parser.add_argument("-id", "--ids", help="Beatport track id(s) to download,", nargs='+')
    parser.add_argument("save_to", help="dir to save the downloaded files")
    parser.add_argument("-d", "--dataset", help="download files associated with a known dataset (gskey, bmtg)")
    parser.add_argument("-m", "--metadata_only", action="store_true", help="download only files with associated metadata")

    args = parser.parse_args()

    if not os.path.isdir(args.save_to):
        args.save_to = create_dir(args.save_to)

    if args.dataset:
        try:
            bids = datasets[args.dataset]
            print("Starting download of '{}' dataset.".format(args.dataset))
        except:
            raise KeyError("Requested dataset unknown. It should be one of the following: {}.".format(datasets.keys()))
    else:
        bids = args.ids

    print("Saving files to '{}'.".format(args.save_to))
    if args.metadata_only:
        print("You have chosen to download only tracks with related metadata.")

    for track_id in bids:
        download_track(int(track_id), args.save_to, skip_tracks_without_metadata=args.metadata_only)

